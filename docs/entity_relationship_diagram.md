# PERS Database Entity Relationship Diagram 

The Publication Email Request Service (PERS) relies on a database to keep track of the email requests that have been sent by stakeholders. Monitoring the email requests via database prevents duplication of email requests. The diagram describes the relationships between entities, or tables, in the database.

The entities involved in PERS are as follows:

* `DLC`: Represents a department, lab, or center at MIT and is managed by a single **liaison**. A **DLC** can comprise of many **authors**, but an author is assigned to a single **DLC**.
* `Liaison`: Represents a DLS staff member on MIT's Scholarly Communications team. **Liaisons** are assigned to one or more **DLCs**. **Liaisons** receive the email requests generated by PERS, who then send the email to authors in their assigned DLCs.
* `Author`: Represents MIT student and faculty who are registered on Symplectic Elements. An **author** is assigned to a single **DLC**. When citations are imported for an author, zero or more **Publications** may be found that require submission.
* `Publications`: Represents a publication written by one or more **Authors**.
* `Email`: Represents an email request for a publication. Many **publications** may be associated with a single **email**. The email generated by PERS will contain a list of citations for publications that need submission. 

   **Note:** According to Solenoid documentation, authors on a single publication will receive **at most one (1)** email for a publication. However, (TO BE CONFIRMED) this is only if, when they're data is imported, the publication appears as not having been requested yet (via a second author that was previously imported through PERS).

```mermaid
erDiagram
    publication["Publication (needing request)"]{
        string publication_id PK 
        string author_id PK
        string title
        string citation
        string email_id FK
    }
    dlc[DLC]{
        string id PK
        string name
    }
    liaison[Liaison]{
        string id PK
        string first_name
        string last_name
        string email_address
        bool active
    }
    author[Author]{
        string id PK
        string dlc FK
        string email_address
        string first_name
        string last_name
    }
    email[Email]{
        string id PK
        richtext original_text
        richtext latest_text
        date date_sent
    }
    liaison |o--o{ dlc: "belongs to"
    dlc ||--o{ author: has
    author }|--o{ publication: has
    publication }o--|| email: "included in"
    author ||--o{ email: receives
    liaison ||--o{ email: receives
```